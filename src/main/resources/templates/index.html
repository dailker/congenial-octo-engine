<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::section})}">
<head>
    <title>Home</title>
    <style>
        /* Three.js background canvas */
        #three-bg {
            position: fixed;
            top: 0; left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 0;
            pointer-events: none;
        }
        /* Overlay for content */
        .hero-section, .features-section {
            position: relative;
            z-index: 1;
        }
        .hero-section {
            background: rgba(255,255,255,0.85);
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.08);
            padding: 3rem 2rem 2rem 2rem;
            margin-top: 3rem;
        }
        .features-section {
            background: rgba(255,255,255,0.85);
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.08);
            padding: 2rem 1rem;
            margin-top: 2rem;
        }
        .card {
            border-radius: 18px;
            box-shadow: 0 4px 24px rgba(99,102,241,0.08);
            border: none;
            transition: transform 0.2s;
        }
        .card:hover {
            transform: translateY(-6px) scale(1.03);
            box-shadow: 0 8px 32px rgba(99,102,241,0.16);
        }
        .display-4 {
            font-weight: 800;
            letter-spacing: -1px;
        }
        .btn-lg {
            font-size: 1.25rem;
            padding: 0.75rem 2rem;
            border-radius: 2rem;
        }
        /* Remove border, shadow, and background for the hero image */
        .hero-section .img-fluid {
            border-radius: 0 !important;
            box-shadow: none !important;
            background: transparent !important;
        }
        @media (max-width: 768px) {
            .hero-section, .features-section {
                padding: 1.5rem 0.5rem;
            }
        }
    </style>
</head>
<body>
<canvas id="three-bg"></canvas>
<section>
    <div class="hero-section mb-5">
        <div class="row align-items-center">
            <div class="col-md-6">
                <h1 class="display-4 fw-bold mb-4">Organize Your Work <span class="text-primary">Effortlessly</span></h1>
                <p class="lead mb-4">Tasky helps you manage your tasks, collaborate with your team, and stay productive.</p>
                <ul class="mb-4 ps-3" style="font-size:1.1rem;">
                    <li>üìù Create, assign, and track tasks with deadlines and priorities</li>
                    <li>üë• Work in teams, invite members, and manage roles</li>
                    <li>ü§ù Connect with friends and see who's online</li>
                    <li>üí¨ Real-time chat and file sharing in teams</li>
                    <li>üîî Smart reminders and notifications</li>
                    <li>üîí Secure, privacy-focused, and easy to use</li>
                </ul>
                <div sec:authorize="!isAuthenticated()">
                    <a href="/register" class="btn btn-primary btn-lg me-3">Get Started</a>
                    <a href="/login" class="btn btn-outline-primary btn-lg">Login</a>
                </div>
                <div sec:authorize="isAuthenticated()">
                    <a href="/tasks/new" class="btn btn-primary btn-lg me-3">Create Task</a>
                    <a href="/tasks" class="btn btn-outline-primary btn-lg">View All Tasks</a>
                </div>
            </div>
            <div class="col-md-6 text-center">
                <img src="https://static.vecteezy.com/system/resources/thumbnails/011/381/947/small_2x/young-man-studying-for-university-test-3d-character-illustration-png.png" alt="Task Management" class="img-fluid">
            </div>
        </div>
    </div>

    <div class="features-section mt-5 pt-5">
        <h2 class="text-center mb-5 fw-bold">Why Choose Tasky?</h2>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <i class="mdi mdi-calendar-check-outline display-4 text-primary mb-3"></i>
                        <h4>Intuitive Calendar</h4>
                        <p class="text-muted">Visualize your tasks on a clean, interactive calendar. Stay on top of deadlines and never miss an important date.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <i class="mdi mdi-account-group-outline display-4 text-primary mb-3"></i>
                        <h4>Team Collaboration</h4>
                        <p class="text-muted">Share tasks, chat, and work together with your team. Manage invitations, roles, and see who's online in real time.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <i class="mdi mdi-bell-outline display-4 text-primary mb-3"></i>
                        <h4>Smart Reminders</h4>
                        <p class="text-muted">Never miss a deadline with our notification system. Get reminders for tasks, invitations, and team updates.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="row g-4 mt-2">
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <i class="mdi mdi-account-multiple-plus-outline display-4 text-primary mb-3"></i>
                        <h4>Friends & Networking</h4>
                        <p class="text-muted">Connect with friends, send and receive friend requests, and see which friends are online for instant collaboration.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <i class="mdi mdi-message-text-outline display-4 text-primary mb-3"></i>
                        <h4>Real-time Chat & File Sharing</h4>
                        <p class="text-muted">Chat with your team, share files, and keep all your project communication in one place.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <i class="mdi mdi-shield-lock-outline display-4 text-primary mb-3"></i>
                        <h4>Secure & Private</h4>
                        <p class="text-muted">Your data is protected with modern security practices. Privacy and safety are our top priorities.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- How it works section -->
    <div class="features-section mt-5 pt-4">
        <h2 class="text-center mb-4 fw-bold">How It Works</h2>
        <div class="row g-4">
            <div class="col-md-3">
                <div class="card h-100 border-0">
                    <div class="card-body text-center">
                        <i class="mdi mdi-account-plus display-4 text-primary mb-2"></i>
                        <h5>1. Register</h5>
                        <p class="text-muted">Sign up with your email and set up your profile in seconds.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card h-100 border-0">
                    <div class="card-body text-center">
                        <i class="mdi mdi-format-list-bulleted display-4 text-primary mb-2"></i>
                        <h5>2. Create Tasks</h5>
                        <p class="text-muted">Add tasks, set priorities, and assign deadlines for yourself or your team.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card h-100 border-0">
                    <div class="card-body text-center">
                        <i class="mdi mdi-account-group display-4 text-primary mb-2"></i>
                        <h5>3. Build Teams</h5>
                        <p class="text-muted">Invite friends and colleagues, manage teams, and collaborate on projects.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card h-100 border-0">
                    <div class="card-body text-center">
                        <i class="mdi mdi-chat-processing display-4 text-primary mb-2"></i>
                        <h5>4. Communicate</h5>
                        <p class="text-muted">Chat, share files, and get notified instantly about updates and deadlines.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Call to action -->
    <div class="text-center mt-5 mb-5">
        <h2 class="fw-bold mb-3">Ready to boost your productivity?</h2>
        <p class="lead mb-4">Join Tasky today and experience seamless task management and collaboration.</p>
        <div sec:authorize="!isAuthenticated()">
            <a href="/register" class="btn btn-primary btn-lg me-3">Sign Up Free</a>
            <a href="/login" class="btn btn-outline-primary btn-lg">Login</a>
        </div>
        <div sec:authorize="isAuthenticated()">
            <a href="/tasks" class="btn btn-primary btn-lg">Go to My Tasks</a>
        </div>
    </div>
</section>
<!-- Three.js animation script -->
<script src="https://cdn.jsdelivr.net/npm/three@0.153.0/build/three.min.js"></script>
<script>
    // Responsive Three.js animated background with floating spheres
    let scene, camera, renderer, spheres = [], animationId;
    function initThreeBG() {
        const canvas = document.getElementById('three-bg');
        // Set canvas size
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 30;

        renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true, antialias: true });
        renderer.setClearColor(0x000000, 0); // transparent

        // Add soft light
        const ambient = new THREE.AmbientLight(0xffffff, 0.7);
        scene.add(ambient);
        const dirLight = new THREE.DirectionalLight(0x6366f1, 1.2);
        dirLight.position.set(10, 20, 20);
        scene.add(dirLight);

        // Create floating spheres
        const sphereCount = 18;
        for (let i = 0; i < sphereCount; i++) {
            const color = new THREE.Color().setHSL(Math.random(), 0.6, 0.6);
            const geometry = new THREE.SphereGeometry(Math.random() * 1.2 + 0.8, 32, 32);
            const material = new THREE.MeshStandardMaterial({ color, roughness: 0.3, metalness: 0.5 });
            const sphere = new THREE.Mesh(geometry, material);
            sphere.position.set(
                (Math.random() - 0.5) * 32,
                (Math.random() - 0.5) * 18,
                (Math.random() - 0.5) * 18
            );
            sphere.userData = {
                speed: Math.random() * 0.005 + 0.002,
                phase: Math.random() * Math.PI * 2
            };
            scene.add(sphere);
            spheres.push(sphere);
        }
        animate();
    }
    function animate() {
        animationId = requestAnimationFrame(animate);
        const t = performance.now() * 0.001;
        spheres.forEach((s, i) => {
            s.position.y += Math.sin(t * s.userData.speed + s.userData.phase) * 0.02;
            s.rotation.y += 0.004 + i * 0.0002;
            s.rotation.x += 0.002 + i * 0.0001;
        });
        renderer.render(scene, camera);
    }
    function resizeThreeBG() {
        const canvas = document.getElementById('three-bg');
        if (!renderer || !camera) return;
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight, false);
    }
    window.addEventListener('resize', resizeThreeBG);
    window.addEventListener('DOMContentLoaded', () => {
        initThreeBG();
        resizeThreeBG();
    });
    window.addEventListener('beforeunload', () => {
        if (animationId) cancelAnimationFrame(animationId);
        if (renderer) renderer.dispose();
    });
</script>
</body>
</html>